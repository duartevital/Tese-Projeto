<html>
<head>
    <meta charset='utf-8' />
    <title>Mapbox Test App</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <link href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.9/mapbox-gl-draw.css' rel='stylesheet' />
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="autocomplete.css" />
    <link rel="stylesheet" href="history.css" />
    <link rel="stylesheet" href="popup.css" />

</head>
<body>
    <div id='map_div'>
        <div id='map'></div>
        <div class='dropdown_div'>
            <button onclick="showViewOptions()" class="dropdown_btn">view</button>
            <div id="dropdown_content" class="dropdown_content" onclick="dropdownClick()">
                <a>Normal</a>
                <a>Heatmap</a>
                <!--<a>Hillshade</a>-->
            </div>
        </div>
    </div>

    <button id="actionButton" onclick="startAll()">Start</button>

    <div class="tab">
        <button class="tabLinks" onclick="openTab(event, 'features_tab')">Labels</button>
        <!--<button class="tabLinks" onclick="openTab(event, 'buttonContainer')">Rules</button>-->
        <button class="tabLinks" onclick="openTab(event, 'history_tab')">History</button>
    </div>

    <div id="features_tab" class="tabContent">
        <section id="left_side_section">
            <div id='features'>
                <button id="newButton" onclick="addDrawTools(this)" title="Enable drawing tools">new</button>
                <button id="editButton" onclick="setPropsTableEditable(this)" style="visibility:hidden">edit</button>
                <button id="saveButton" onclick="savePropsChanges(this)" style="visibility:hidden">save</button>
                <table id="propsTable" style="width:100%"></table>
            </div>
            <div id='objDiv'>
                <table id="objTable" style="width:100%" title="List of all building/landuse objects"></table>
            </div>
        </section>

        <section id="top_right_section">
            <h5 class="title_text">Object areas (%)</h5>
            <canvas id="myChart" width="100" height="80"></canvas>
        </section>

        <section id="bottom_right_section">
            <div id="roadsDiv">
                <table id="roadsTable" style="width:100%" title="List of all roads"></table>
            </div>
            <!-- Inserir coisas relacionads com o AQI nesta secção -->
        </section>
    </div>

    <button onclick="dumbFunction()" id="dumb_btn">dumb btn</button>
    <!--<button onclick="loadAllInfo()" id="loadAll_btn">LOAD</button>-->
    <button onclick="saveAllInfo()" id="saveAll_btn" title="Saves everything in a JSON file">SAVE</button>
    <button onclick="sendInfo()" id="send_btn" title="Send to server">SEND</button>

    <aside id='buttonContainer' class="tabContent">
        <button type="button" id="countButtons" onclick="countFeatures()">Count Features</button>
        <button type="button" id="countButtons" onclick="getAllObjects()">Extract Features</button>
    </aside>

    <div id="history_tab" class="tabContent">
        <div class="entries_section">
            <h4 id="empty_history">Your history is empty</h4>
        </div>
    </div>

    <!--      TEMPLATES       -->
    <!--Entry template to be instanciated in history tab-->
    <template>
        <div class="entry">
            <h5 id="timestamp"></h5>
            <div onclick="loadSelectedEntry(this)" class="sub_entry">
                <p hidden id="id"></p>
                <div class="info_holder">
                    <dl>
                        <dt>Location: </dt>
                        <dd id="location_coords"></dd>
                    </dl>
                    <hr class="dl_separator" />
                    <dl>
                        <dt>Building: </dt>
                        <dd id="building_area"></dd>
                        <dt>Landuse: </dt>
                        <dd id="landuse_area"></dd>
                        <dt>Road: </dt>
                        <dd id="road_length"></dd>
                    </dl>
                </div>
                <div class="aqi_holder">
                    <p>AQI</p>
                    <p id="aqi" class="aqi"><b>136</b></p>
                </div>
            </div>
        </div>
    </template>

    <!--Popups templates-->
    <template id="type_popup_template">
        <span class="popuptext" id="type_popup">Object must have a type</span>
    </template>

    <!--Hints template-->
    <template id="hint_template">
        <div>
            <img src="../Media/hint_icon.png" alt="hint icon" width="5" height="5" />
        </div>
    </template>

    <!--Import scripts-->
    <script src="./../TagsHandler.js"></script>
    <script src="./../Mapbox_gl.js"></script>
    <script src="./../jsonHandler.js"></script>
    <script src="./../Interface.js"></script>
    <script src="./../Calculations.js"></script>
    <script src="./../Heatmap.js"></script>
</body>
</html>